{"version":3,"sources":["API.js","app.js"],"names":["document","addEventListener","iniciarAPI","mostrar","id","titulo","productos","orden","modo","fecha","hora","window","location","pathname","consultarTipos","includes","buscador","async","urlTipos","resultadoTipos","fetch","consultarProductos","json","error","console","log","tipo","resultadoProductos","mostrarTipos","tipos","forEach","producto","idTipo","push","mostrarProductos","pedidoLocal","querySelector","createElement","textContent","pedidoLocalDiv","classList","add","tipoDiv","appendChild","cuerpoDiv","dataset","idProducto","onclick","seleccionarProducto","imagenDiv","imagen","src","alt","contenidoDiv","tituloProducto","precioProducto","precio","divProducto","btnConfirmar","confirmarOrden","some","agregado","filter","remove","length","Date","toLocaleDateString","minutos","getMinutes","getHours","limpiar","mostrarResumen","total","btnGuardarPedido","guardarOrden","resumenLocalDiv","tituloResumen","divFecha","divHora","totalProducto","parseInt","resumenDiv","productoDiv","btnEliminar","eliminarDeResumen","productoId","map","datos","FormData","append","Swal","fire","icon","title","setTimeout","reload","url","respuesta","method","body","elemento","div","firstChild","removeChild","e","fechaSeleccionada","target","value","iniciarApp","menu","sidebar","cerrar"],"mappings":"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","file":"bundle.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function() {\r\n    iniciarAPI()\r\n})\r\n\r\nconst mostrar = {\r\n    id: '',\r\n    titulo: '',\r\n    productos: []\r\n}\r\n\r\n\r\nconst orden = {\r\n    id: '',\r\n    modo: '',\r\n    fecha: '',\r\n    hora: '',\r\n    productos: []\r\n}\r\n\r\n\r\nfunction iniciarAPI() {\r\n    if(window.location.pathname === '/admin') {\r\n        consultarTipos()\r\n    }\r\n    \r\n    if(window.location.pathname.includes('/ordenes')) {\r\n        buscador()\r\n    }\r\n    \r\n    \r\n}\r\n\r\nasync function consultarTipos() {\r\n    try {\r\n        const urlTipos = '/api/tipos'\r\n        const resultadoTipos = await fetch(urlTipos)\r\n        const tipos = await resultadoTipos.json()\r\n        \r\n        consultarProductos(tipos)\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nasync function consultarProductos(tipo) {\r\n    const urlProductos = '/api/productos'\r\n    const resultadoProductos = await fetch(urlProductos)\r\n    const productos = await resultadoProductos.json()\r\n\r\n    mostrarTipos(tipo, productos)\r\n}\r\n\r\nfunction mostrarTipos(tipos, productos) {\r\n\r\n    tipos.forEach(tipo => {\r\n        mostrar.id = tipo.id\r\n        mostrar.titulo = tipo.titulo\r\n\r\n        productos.forEach(producto => {\r\n            if(tipo.id === producto.idTipo) {\r\n                mostrar.productos.push(producto)\r\n            }\r\n        })\r\n\r\n        mostrarProductos(tipo)\r\n    })\r\n\r\n}\r\n\r\nfunction mostrarProductos(tipo) {\r\n\r\n    const pedidoLocal = document.querySelector('#pedido-local')\r\n\r\n    const titulo = document.createElement('H1')\r\n    titulo.textContent = mostrar.titulo\r\n\r\n    const pedidoLocalDiv = document.createElement('DIV')\r\n    pedidoLocalDiv.classList.add('pedido-local')\r\n\r\n    const tipoDiv = document.createElement('DIV')\r\n    tipoDiv.classList.add('tipo')\r\n\r\n\r\n\r\n    pedidoLocal.appendChild(pedidoLocalDiv)\r\n\r\n    pedidoLocalDiv.appendChild(titulo)\r\n    pedidoLocalDiv.appendChild(tipoDiv)\r\n\r\n    mostrar.productos.forEach(producto => {\r\n        if(tipo.id === producto.idTipo) {\r\n            const cuerpoDiv = document.createElement('DIV')\r\n            cuerpoDiv.classList.add('cuerpo-producto')\r\n            cuerpoDiv.dataset.idProducto = producto.id\r\n            cuerpoDiv.onclick = function() {\r\n                seleccionarProducto(producto)\r\n            }\r\n\r\n            const imagenDiv = document.createElement('DIV')\r\n            imagenDiv.classList.add('imagen')\r\n\r\n            const imagen = document.createElement('IMG')\r\n            imagen.src = `/imagenes/${producto.imagen}`\r\n            imagen.alt = 'Imagen de Producto'\r\n\r\n            const contenidoDiv = document.createElement('DIV')\r\n            contenidoDiv.classList.add('contenido')\r\n\r\n            const tituloProducto = document.createElement('H2')\r\n            tituloProducto.textContent = producto.titulo\r\n\r\n            const precioProducto = document.createElement('H3')\r\n            precioProducto.textContent = `₡${producto.precio}`\r\n            precioProducto.classList.add('precio')\r\n\r\n\r\n            contenidoDiv.appendChild(tituloProducto)\r\n            contenidoDiv.appendChild(precioProducto)\r\n\r\n            imagenDiv.appendChild(imagen)\r\n\r\n            cuerpoDiv.appendChild(imagenDiv)\r\n            cuerpoDiv.appendChild(contenidoDiv)\r\n\r\n            tipoDiv.appendChild(cuerpoDiv)\r\n        }\r\n    })\r\n}\r\n\r\n\r\n\r\nfunction seleccionarProducto(producto) {\r\n    const {id} = producto\r\n    const {productos} = orden\r\n    const divProducto = document.querySelector(`[data-id-producto=\"${id}\"]`)   \r\n    const btnConfirmar = document.querySelector('#confirmar')\r\n\r\n    btnConfirmar.onclick = function() {\r\n        confirmarOrden();\r\n    }\r\n    \r\n    if(productos.some(agregado => agregado.id === id)) {\r\n        orden.productos = productos.filter(agregado => agregado.id !== id)\r\n        divProducto.classList.remove('agregado')\r\n\r\n    } else {\r\n        orden.productos = [...productos, producto]\r\n        divProducto.classList.add('agregado')\r\n    }\r\n\r\n    if(orden.productos.length > 0) {\r\n        btnConfirmar.classList.add('mostrar')\r\n    } else {\r\n        btnConfirmar.classList.remove('mostrar')\r\n\r\n    }\r\n}\r\n\r\n\r\nfunction confirmarOrden() { \r\n    const id = document.querySelector('#id')    \r\n    orden.id = id.textContent\r\n\r\n    if(orden.id === '1') {\r\n        orden.modo = 0\r\n        const fecha = new Date()\r\n        orden.fecha = fecha.toLocaleDateString()\r\n        \r\n        let minutos = fecha.getMinutes()\r\n        if(minutos < 9) {\r\n            minutos = `0${minutos}`\r\n        }\r\n\r\n        orden.hora = fecha.getHours() + \":\" + minutos\r\n        \r\n    } else {\r\n        orden.modo = 1\r\n    }\r\n\r\n    limpiar('#pedido-local')\r\n    mostrarResumen()    \r\n}\r\n\r\nfunction mostrarResumen() {\r\n    const {productos} = orden\r\n    let total = 0\r\n\r\n    const btnConfirmarPedido = document.querySelector('#confirmar')\r\n    btnConfirmarPedido.classList.remove('mostrar')\r\n\r\n    const btnGuardarPedido = document.querySelector('#guardar')\r\n    btnGuardarPedido.classList.add('mostrar')\r\n    btnGuardarPedido.onclick = guardarOrden\r\n\r\n    const pedidoLocalDiv = document.querySelector('#pedido-local')\r\n\r\n    const resumenLocalDiv = document.createElement('DIV')\r\n    resumenLocalDiv.classList.add('resumen-local')\r\n\r\n    const tituloResumen = document.createElement('h1')\r\n    tituloResumen.textContent = 'Resumen de Orden'\r\n\r\n    const divFecha = document.createElement('P')\r\n    divFecha.classList.add('tiempo')\r\n    divFecha.textContent = `Fecha: ${orden.fecha}`\r\n\r\n    const divHora = document.createElement('P')\r\n    divHora.classList.add('tiempo')\r\n    divHora.textContent = `Hora: ${orden.hora}`\r\n\r\n    const totalProducto = document.createElement('H2')\r\n    totalProducto.classList.add('total')\r\n\r\n\r\n    resumenLocalDiv.appendChild(tituloResumen)\r\n    resumenLocalDiv.appendChild(divFecha)\r\n    resumenLocalDiv.appendChild(divHora)\r\n    pedidoLocalDiv.appendChild(resumenLocalDiv)\r\n\r\n    productos.forEach(producto => {\r\n        const precio = parseInt(producto.precio)\r\n        total += precio\r\n        totalProducto.textContent = `Total: ₡${total}`\r\n\r\n        const resumenDiv = document.createElement('DIV')\r\n        resumenDiv.classList.add('resumen')\r\n\r\n        const productoDiv = document.createElement('DIV')\r\n        productoDiv.classList.add('producto')\r\n\r\n        const tituloProducto = document.createElement('H3')\r\n        tituloProducto.textContent = producto.titulo\r\n\r\n        const precioProducto = document.createElement('H3')\r\n        precioProducto.classList.add('precio')\r\n        precioProducto.textContent = `₡${precio}`\r\n        \r\n        const btnEliminar = document.createElement('BUTTON')\r\n        btnEliminar.classList.add('boton')\r\n        btnEliminar.classList.add('eliminar')\r\n        btnEliminar.textContent = 'Eliminar'\r\n        btnEliminar.onclick = function() {\r\n            eliminarDeResumen(producto)\r\n        }\r\n\r\n        productoDiv.appendChild(tituloProducto)\r\n        productoDiv.appendChild(precioProducto)\r\n\r\n        resumenDiv.appendChild(productoDiv)\r\n        resumenDiv.appendChild(btnEliminar)\r\n\r\n        resumenLocalDiv.appendChild(resumenDiv)\r\n    })\r\n\r\n    resumenLocalDiv.appendChild(totalProducto)\r\n    \r\n}\r\n\r\nasync function guardarOrden() {\r\n    const {id, modo, fecha, hora, productos} = orden\r\n    const productoId = productos.map(producto => producto.id)\r\n\r\n\r\n    const datos = new FormData()\r\n    datos.append('usuarioId', id)\r\n    datos.append('modo', modo)\r\n    datos.append('fecha', fecha)\r\n    datos.append('hora', hora)\r\n    datos.append('productos', productoId)\r\n\r\n    Swal.fire({\r\n        icon: \"success\",\r\n        title: \"Guardado Exitosamente\"\r\n    });\r\n\r\n    setTimeout(() => {\r\n        window.location.reload()\r\n    }, 2000);\r\n\r\n    try {\r\n        const url = '/api/guardar'\r\n        const respuesta = await fetch(url, {\r\n            method: 'POST',\r\n            body: datos\r\n        })\r\n        const resultado = await respuesta.json()\r\n        \r\n    } catch (error) {\r\n        console.log(error);\r\n        \r\n    }\r\n\r\n}\r\n\r\nfunction eliminarDeResumen(producto) {\r\n    const {id} = producto\r\n    const {productos} = orden\r\n\r\n    orden.productos = productos.filter(agregado => agregado.id !== id)\r\n\r\n    confirmarOrden();\r\n\r\n    if(productos.length === 1) {\r\n        window.location.reload();\r\n    }    \r\n}\r\n\r\nfunction limpiar(elemento) {\r\n    const div = document.querySelector(elemento)\r\n    \r\n    while(div.firstChild) {\r\n        div.removeChild(div.firstChild)\r\n    }\r\n}\r\n\r\nfunction buscador() {\r\n    const fechaInput = document.querySelector('#fecha')\r\n    \r\n    fechaInput.addEventListener('input', e => {\r\n        const fechaSeleccionada = e.target.value\r\n        window.location = `?fecha=${fechaSeleccionada}`\r\n    })\r\n}","document.addEventListener(\"DOMContentLoaded\", function() {\r\n    iniciarApp();\r\n})\r\n\r\nfunction iniciarApp() {\r\n    menu()\r\n}\r\n\r\nfunction menu() {\r\n    const menu = document.querySelector('#menu')\r\n    const sidebar = document.querySelector('#sidebar')\r\n    const cerrar = document.querySelector('#cerrar')\r\n    menu.addEventListener('click', function() {\r\n        sidebar.classList.add('mostrar')\r\n        setTimeout(() => {\r\n            sidebar.classList.add('opacity-in')\r\n        }, 0);\r\n    })\r\n    cerrar.addEventListener('click', function() {\r\n        sidebar.classList.add('opacity-out')\r\n        sidebar.classList.remove('opacity-in')\r\n        setTimeout(() => {\r\n            sidebar.classList.remove('mostrar')\r\n            sidebar.classList.remove('opacity-out')\r\n        }, 200);\r\n        \r\n\r\n    })\r\n}"]}