{"version":3,"sources":["API.js","app.js"],"names":["document","addEventListener","iniciarAPI","mostrar","id","titulo","productos","orden","modo","fecha","hora","consultarTipos","async","urlTipos","resultadoTipos","fetch","consultarProductos","json","error","console","log","tipo","resultadoProductos","mostrarTipos","tipos","forEach","producto","idTipo","push","mostrarProductos","pedidoLocal","querySelector","createElement","textContent","pedidoLocalDiv","classList","add","tipoDiv","appendChild","cuerpoDiv","dataset","idProducto","onclick","seleccionarProducto","imagenDiv","imagen","src","alt","contenidoDiv","tituloProducto","precioProducto","precio","divProducto","btnConfirmar","confirmarOrden","some","agregado","filter","remove","length","Date","toLocaleDateString","minutos","getMinutes","getHours","limpiar","mostrarResumen","total","btnGuardarPedido","guardarOrden","resumenLocalDiv","tituloResumen","divFecha","divHora","totalProducto","parseInt","resumenDiv","productoDiv","btnEliminar","eliminarDeResumen","productoId","map","datos","FormData","append","Swal","fire","icon","title","setTimeout","window","location","reload","url","respuesta","method","body","firstChild","removeChild","iniciarApp","menu","sidebar","cerrar"],"mappings":"AAAAA,SAAAC,iBAAA,oBAAA,WACAC,gBAGA,MAAAC,QAAA,CACAC,GAAA,GACAC,OAAA,GACAC,UAAA,IAIAC,MAAA,CACAH,GAAA,GACAI,KAAA,GACAC,MAAA,GACAC,KAAA,GACAJ,UAAA,IAIA,SAAAJ,aACAS,iBAIAC,eAAAD,iBACA,IACA,MAAAE,EAAA,aACAC,QAAAC,MAAAF,GAGAG,yBAFAF,EAAAG,QAGA,MAAAC,GACAC,QAAAC,IAAAF,IAIAN,eAAAI,mBAAAK,GACA,MACAC,QAAAP,MADA,kBAIAQ,aAAAF,QAFAC,EAAAL,QAKA,SAAAM,aAAAC,EAAAlB,GAEAkB,EAAAC,QAAAJ,IACAlB,QAAAC,GAAAiB,EAAAjB,GACAD,QAAAE,OAAAgB,EAAAhB,OAEAC,EAAAmB,QAAAC,IACAL,EAAAjB,KAAAsB,EAAAC,QACAxB,QAAAG,UAAAsB,KAAAF,KAIAG,iBAAAR,KAKA,SAAAQ,iBAAAR,GAEA,MAAAS,EAAA9B,SAAA+B,cAAA,iBAEA1B,EAAAL,SAAAgC,cAAA,MACA3B,EAAA4B,YAAA9B,QAAAE,OAEA,MAAA6B,EAAAlC,SAAAgC,cAAA,OACAE,EAAAC,UAAAC,IAAA,gBAEA,MAAAC,EAAArC,SAAAgC,cAAA,OACAK,EAAAF,UAAAC,IAAA,QAIAN,EAAAQ,YAAAJ,GAEAA,EAAAI,YAAAjC,GACA6B,EAAAI,YAAAD,GAEAlC,QAAAG,UAAAmB,QAAAC,IACA,GAAAL,EAAAjB,KAAAsB,EAAAC,OAAA,CACA,MAAAY,EAAAvC,SAAAgC,cAAA,OACAO,EAAAJ,UAAAC,IAAA,UACAG,EAAAC,QAAAC,WAAAf,EAAAtB,GACAmC,EAAAG,QAAA,WACAC,oBAAAjB,IAGA,MAAAkB,EAAA5C,SAAAgC,cAAA,OACAY,EAAAT,UAAAC,IAAA,UAEA,MAAAS,EAAA7C,SAAAgC,cAAA,OACAa,EAAAC,IAAA,aAAApB,EAAAmB,OACAA,EAAAE,IAAA,qBAEA,MAAAC,EAAAhD,SAAAgC,cAAA,OACAgB,EAAAb,UAAAC,IAAA,aAEA,MAAAa,EAAAjD,SAAAgC,cAAA,MACAiB,EAAAhB,YAAAP,EAAArB,OAEA,MAAA6C,EAAAlD,SAAAgC,cAAA,MACAkB,EAAAjB,YAAA,IAAAP,EAAAyB,OACAD,EAAAf,UAAAC,IAAA,UAGAY,EAAAV,YAAAW,GACAD,EAAAV,YAAAY,GAEAN,EAAAN,YAAAO,GAEAN,EAAAD,YAAAM,GACAL,EAAAD,YAAAU,GAEAX,EAAAC,YAAAC,MAOA,SAAAI,oBAAAjB,GACA,MAAAtB,GAAAA,GAAAsB,GACApB,UAAAA,GAAAC,MACA6C,EAAApD,SAAA+B,cAAA,sBAAA3B,OACAiD,EAAArD,SAAA+B,cAAA,cAEAsB,EAAAX,QAAA,WACAY,kBAGAhD,EAAAiD,KAAAC,GAAAA,EAAApD,KAAAA,IACAG,MAAAD,UAAAA,EAAAmD,OAAAD,GAAAA,EAAApD,KAAAA,GACAgD,EAAAjB,UAAAuB,OAAA,cAGAnD,MAAAD,UAAA,IAAAA,EAAAoB,GACA0B,EAAAjB,UAAAC,IAAA,aAGA7B,MAAAD,UAAAqD,OAAA,EACAN,EAAAlB,UAAAC,IAAA,WAEAiB,EAAAlB,UAAAuB,OAAA,WAMA,SAAAJ,iBACA,MAAAlD,EAAAJ,SAAA+B,cAAA,OAGA,GAFAxB,MAAAH,GAAAA,EAAA6B,YAEA,MAAA1B,MAAAH,GAAA,CACAG,MAAAC,KAAA,EACA,MAAAC,EAAA,IAAAmD,KACArD,MAAAE,MAAAA,EAAAoD,qBAEA,IAAAC,EAAArD,EAAAsD,aACAD,EAAA,IACAA,EAAA,IAAAA,GAGAvD,MAAAG,KAAAD,EAAAuD,WAAA,IAAAF,OAGAvD,MAAAC,KAAA,EAGAyD,UACAC,iBAGA,SAAAA,iBACA,MAAA5D,UAAAA,GAAAC,MACA,IAAA4D,EAAA,EAEAnE,SAAA+B,cAAA,cACAI,UAAAuB,OAAA,WAEA,MAAAU,EAAApE,SAAA+B,cAAA,YACAqC,EAAAjC,UAAAC,IAAA,WACAgC,EAAA1B,QAAA2B,aAEA,MAAAnC,EAAAlC,SAAA+B,cAAA,iBAEAuC,EAAAtE,SAAAgC,cAAA,OACAsC,EAAAnC,UAAAC,IAAA,iBAEA,MAAAmC,EAAAvE,SAAAgC,cAAA,MACAuC,EAAAtC,YAAA,mBAEA,MAAAuC,EAAAxE,SAAAgC,cAAA,KACAwC,EAAArC,UAAAC,IAAA,UACAoC,EAAAvC,YAAA,UAAA1B,MAAAE,MAEA,MAAAgE,EAAAzE,SAAAgC,cAAA,KACAyC,EAAAtC,UAAAC,IAAA,UACAqC,EAAAxC,YAAA,SAAA1B,MAAAG,KAEA,MAAAgE,EAAA1E,SAAAgC,cAAA,MACA0C,EAAAvC,UAAAC,IAAA,SAGAkC,EAAAhC,YAAAiC,GACAD,EAAAhC,YAAAkC,GACAF,EAAAhC,YAAAmC,GACAvC,EAAAI,YAAAgC,GAEAhE,EAAAmB,QAAAC,IACA,MAAAyB,EAAAwB,SAAAjD,EAAAyB,QACAgB,GAAAhB,EACAuB,EAAAzC,YAAA,WAAAkC,EAEA,MAAAS,EAAA5E,SAAAgC,cAAA,OACA4C,EAAAzC,UAAAC,IAAA,WAEA,MAAAyC,EAAA7E,SAAAgC,cAAA,OACA6C,EAAA1C,UAAAC,IAAA,YAEA,MAAAa,EAAAjD,SAAAgC,cAAA,MACAiB,EAAAhB,YAAAP,EAAArB,OAEA,MAAA6C,EAAAlD,SAAAgC,cAAA,MACAkB,EAAAf,UAAAC,IAAA,UACAc,EAAAjB,YAAA,IAAAkB,EAEA,MAAA2B,EAAA9E,SAAAgC,cAAA,UACA8C,EAAA3C,UAAAC,IAAA,SACA0C,EAAA3C,UAAAC,IAAA,YACA0C,EAAA7C,YAAA,WACA6C,EAAApC,QAAA,WACAqC,kBAAArD,IAGAmD,EAAAvC,YAAAW,GACA4B,EAAAvC,YAAAY,GAEA0B,EAAAtC,YAAAuC,GACAD,EAAAtC,YAAAwC,GAEAR,EAAAhC,YAAAsC,KAGAN,EAAAhC,YAAAoC,GAIA9D,eAAAyD,eACA,MAAAjE,GAAAA,EAAAI,KAAAA,EAAAC,MAAAA,EAAAC,KAAAA,EAAAJ,UAAAA,GAAAC,MACAyE,EAAA1E,EAAA2E,IAAAvD,GAAAA,EAAAtB,IAGA8E,EAAA,IAAAC,SACAD,EAAAE,OAAA,YAAAhF,GACA8E,EAAAE,OAAA,OAAA5E,GACA0E,EAAAE,OAAA,QAAA3E,GACAyE,EAAAE,OAAA,OAAA1E,GACAwE,EAAAE,OAAA,YAAAJ,GAEAK,KAAAC,KAAA,CACAC,KAAA,UACAC,MAAA,0BAGAC,WAAA,KACAC,OAAAC,SAAAC,UACA,KAEA,IACA,MAAAC,EAAA,eACAC,QAAA/E,MAAA8E,EAAA,CACAE,OAAA,OACAC,KAAAd,UAEAY,EAAA7E,OAEA,MAAAC,GACAC,QAAAC,IAAAF,IAMA,SAAA6D,kBAAArD,GACA,MAAAtB,GAAAA,GAAAsB,GACApB,UAAAA,GAAAC,MAEAA,MAAAD,UAAAA,EAAAmD,OAAAD,GAAAA,EAAApD,KAAAA,GAEAkD,iBAEA,IAAAhD,EAAAqD,QACA+B,OAAAC,SAAAC,SAIA,SAAA3B,UACA,MAAA/B,EAAAlC,SAAA+B,cAAA,iBAEA,KAAAG,EAAA+D,YACA/D,EAAAgE,YAAAhE,EAAA+D,YC5SA,SAAAE,aACAC,OAGA,SAAAA,OACA,MAAAA,EAAApG,SAAA+B,cAAA,SACAsE,EAAArG,SAAA+B,cAAA,YACAuE,EAAAtG,SAAA+B,cAAA,WACAqE,EAAAnG,iBAAA,SAAA,WACAoG,EAAAlE,UAAAC,IAAA,WACAqD,WAAA,KACAY,EAAAlE,UAAAC,IAAA,eACA,MAEAkE,EAAArG,iBAAA,SAAA,WACAoG,EAAAlE,UAAAC,IAAA,eACAiE,EAAAlE,UAAAuB,OAAA,cACA+B,WAAA,KACAY,EAAAlE,UAAAuB,OAAA,WACA2C,EAAAlE,UAAAuB,OAAA,gBACA,QAxBA1D,SAAAC,iBAAA,oBAAA,WACAkG","file":"bundle.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function() {\r\n    iniciarAPI()\r\n})\r\n\r\nconst mostrar = {\r\n    id: '',\r\n    titulo: '',\r\n    productos: []\r\n}\r\n\r\n\r\nconst orden = {\r\n    id: '',\r\n    modo: '',\r\n    fecha: '',\r\n    hora: '',\r\n    productos: []\r\n}\r\n\r\n\r\nfunction iniciarAPI() {\r\n    consultarTipos()\r\n    // mostrarResumen()\r\n}\r\n\r\nasync function consultarTipos() {\r\n    try {\r\n        const urlTipos = '/api/tipos'\r\n        const resultadoTipos = await fetch(urlTipos)\r\n        const tipos = await resultadoTipos.json()\r\n        \r\n        consultarProductos(tipos)\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nasync function consultarProductos(tipo) {\r\n    const urlProductos = '/api/productos'\r\n    const resultadoProductos = await fetch(urlProductos)\r\n    const productos = await resultadoProductos.json()\r\n\r\n    mostrarTipos(tipo, productos)\r\n}\r\n\r\nfunction mostrarTipos(tipos, productos) {\r\n\r\n    tipos.forEach(tipo => {\r\n        mostrar.id = tipo.id\r\n        mostrar.titulo = tipo.titulo\r\n\r\n        productos.forEach(producto => {\r\n            if(tipo.id === producto.idTipo) {\r\n                mostrar.productos.push(producto)\r\n            }\r\n        })\r\n\r\n        mostrarProductos(tipo)\r\n    })\r\n\r\n}\r\n\r\nfunction mostrarProductos(tipo) {\r\n\r\n    const pedidoLocal = document.querySelector('#pedido-local')\r\n\r\n    const titulo = document.createElement('H1')\r\n    titulo.textContent = mostrar.titulo\r\n\r\n    const pedidoLocalDiv = document.createElement('DIV')\r\n    pedidoLocalDiv.classList.add('pedido-local')\r\n\r\n    const tipoDiv = document.createElement('DIV')\r\n    tipoDiv.classList.add('tipo')\r\n\r\n\r\n\r\n    pedidoLocal.appendChild(pedidoLocalDiv)\r\n\r\n    pedidoLocalDiv.appendChild(titulo)\r\n    pedidoLocalDiv.appendChild(tipoDiv)\r\n\r\n    mostrar.productos.forEach(producto => {\r\n        if(tipo.id === producto.idTipo) {\r\n            const cuerpoDiv = document.createElement('DIV')\r\n            cuerpoDiv.classList.add('cuerpo')\r\n            cuerpoDiv.dataset.idProducto = producto.id\r\n            cuerpoDiv.onclick = function() {\r\n                seleccionarProducto(producto)\r\n            }\r\n\r\n            const imagenDiv = document.createElement('DIV')\r\n            imagenDiv.classList.add('imagen')\r\n\r\n            const imagen = document.createElement('IMG')\r\n            imagen.src = `/imagenes/${producto.imagen}`\r\n            imagen.alt = 'Imagen de Producto'\r\n\r\n            const contenidoDiv = document.createElement('DIV')\r\n            contenidoDiv.classList.add('contenido')\r\n\r\n            const tituloProducto = document.createElement('H2')\r\n            tituloProducto.textContent = producto.titulo\r\n\r\n            const precioProducto = document.createElement('H3')\r\n            precioProducto.textContent = `₡${producto.precio}`\r\n            precioProducto.classList.add('precio')\r\n\r\n\r\n            contenidoDiv.appendChild(tituloProducto)\r\n            contenidoDiv.appendChild(precioProducto)\r\n\r\n            imagenDiv.appendChild(imagen)\r\n\r\n            cuerpoDiv.appendChild(imagenDiv)\r\n            cuerpoDiv.appendChild(contenidoDiv)\r\n\r\n            tipoDiv.appendChild(cuerpoDiv)\r\n        }\r\n    })\r\n}\r\n\r\n\r\n\r\nfunction seleccionarProducto(producto) {\r\n    const {id} = producto\r\n    const {productos} = orden\r\n    const divProducto = document.querySelector(`[data-id-producto=\"${id}\"]`)   \r\n    const btnConfirmar = document.querySelector('#confirmar')\r\n\r\n    btnConfirmar.onclick = function() {\r\n        confirmarOrden();\r\n    }\r\n    \r\n    if(productos.some(agregado => agregado.id === id)) {\r\n        orden.productos = productos.filter(agregado => agregado.id !== id)\r\n        divProducto.classList.remove('agregado')\r\n\r\n    } else {\r\n        orden.productos = [...productos, producto]\r\n        divProducto.classList.add('agregado')\r\n    }\r\n\r\n    if(orden.productos.length > 0) {\r\n        btnConfirmar.classList.add('mostrar')\r\n    } else {\r\n        btnConfirmar.classList.remove('mostrar')\r\n\r\n    }\r\n}\r\n\r\n\r\nfunction confirmarOrden() { \r\n    const id = document.querySelector('#id')    \r\n    orden.id = id.textContent\r\n\r\n    if(orden.id === '1') {\r\n        orden.modo = 0\r\n        const fecha = new Date()\r\n        orden.fecha = fecha.toLocaleDateString()\r\n        \r\n        let minutos = fecha.getMinutes()\r\n        if(minutos < 9) {\r\n            minutos = `0${minutos}`\r\n        }\r\n\r\n        orden.hora = fecha.getHours() + \":\" + minutos\r\n        \r\n    } else {\r\n        orden.modo = 1\r\n    }\r\n\r\n    limpiar()\r\n    mostrarResumen()    \r\n}\r\n\r\nfunction mostrarResumen() {\r\n    const {productos} = orden\r\n    let total = 0\r\n\r\n    const btnConfirmarPedido = document.querySelector('#confirmar')\r\n    btnConfirmarPedido.classList.remove('mostrar')\r\n\r\n    const btnGuardarPedido = document.querySelector('#guardar')\r\n    btnGuardarPedido.classList.add('mostrar')\r\n    btnGuardarPedido.onclick = guardarOrden\r\n\r\n    const pedidoLocalDiv = document.querySelector('#pedido-local')\r\n\r\n    const resumenLocalDiv = document.createElement('DIV')\r\n    resumenLocalDiv.classList.add('resumen-local')\r\n\r\n    const tituloResumen = document.createElement('h1')\r\n    tituloResumen.textContent = 'Resumen de Orden'\r\n\r\n    const divFecha = document.createElement('P')\r\n    divFecha.classList.add('tiempo')\r\n    divFecha.textContent = `Fecha: ${orden.fecha}`\r\n\r\n    const divHora = document.createElement('P')\r\n    divHora.classList.add('tiempo')\r\n    divHora.textContent = `Hora: ${orden.hora}`\r\n\r\n    const totalProducto = document.createElement('H2')\r\n    totalProducto.classList.add('total')\r\n\r\n\r\n    resumenLocalDiv.appendChild(tituloResumen)\r\n    resumenLocalDiv.appendChild(divFecha)\r\n    resumenLocalDiv.appendChild(divHora)\r\n    pedidoLocalDiv.appendChild(resumenLocalDiv)\r\n\r\n    productos.forEach(producto => {\r\n        const precio = parseInt(producto.precio)\r\n        total += precio\r\n        totalProducto.textContent = `Total: ₡${total}`\r\n\r\n        const resumenDiv = document.createElement('DIV')\r\n        resumenDiv.classList.add('resumen')\r\n\r\n        const productoDiv = document.createElement('DIV')\r\n        productoDiv.classList.add('producto')\r\n\r\n        const tituloProducto = document.createElement('H3')\r\n        tituloProducto.textContent = producto.titulo\r\n\r\n        const precioProducto = document.createElement('H3')\r\n        precioProducto.classList.add('precio')\r\n        precioProducto.textContent = `₡${precio}`\r\n        \r\n        const btnEliminar = document.createElement('BUTTON')\r\n        btnEliminar.classList.add('boton')\r\n        btnEliminar.classList.add('eliminar')\r\n        btnEliminar.textContent = 'Eliminar'\r\n        btnEliminar.onclick = function() {\r\n            eliminarDeResumen(producto)\r\n        }\r\n\r\n        productoDiv.appendChild(tituloProducto)\r\n        productoDiv.appendChild(precioProducto)\r\n\r\n        resumenDiv.appendChild(productoDiv)\r\n        resumenDiv.appendChild(btnEliminar)\r\n\r\n        resumenLocalDiv.appendChild(resumenDiv)\r\n    })\r\n\r\n    resumenLocalDiv.appendChild(totalProducto)\r\n    \r\n}\r\n\r\nasync function guardarOrden() {\r\n    const {id, modo, fecha, hora, productos} = orden\r\n    const productoId = productos.map(producto => producto.id)\r\n\r\n\r\n    const datos = new FormData()\r\n    datos.append('usuarioId', id)\r\n    datos.append('modo', modo)\r\n    datos.append('fecha', fecha)\r\n    datos.append('hora', hora)\r\n    datos.append('productos', productoId)\r\n\r\n    Swal.fire({\r\n        icon: \"success\",\r\n        title: \"Guardado Exitosamente\"\r\n    });\r\n\r\n    setTimeout(() => {\r\n        window.location.reload()\r\n    }, 2000);\r\n\r\n    try {\r\n        const url = '/api/guardar'\r\n        const respuesta = await fetch(url, {\r\n            method: 'POST',\r\n            body: datos\r\n        })\r\n        const resultado = await respuesta.json()\r\n        \r\n    } catch (error) {\r\n        console.log(error);\r\n        \r\n    }\r\n\r\n}\r\n\r\nfunction eliminarDeResumen(producto) {\r\n    const {id} = producto\r\n    const {productos} = orden\r\n\r\n    orden.productos = productos.filter(agregado => agregado.id !== id)\r\n\r\n    confirmarOrden();\r\n\r\n    if(productos.length === 1) {\r\n        window.location.reload();\r\n    }    \r\n}\r\n\r\nfunction limpiar() {\r\n    const pedidoLocalDiv = document.querySelector('#pedido-local')\r\n    \r\n    while(pedidoLocalDiv.firstChild) {\r\n        pedidoLocalDiv.removeChild(pedidoLocalDiv.firstChild)\r\n    }\r\n}\r\n","document.addEventListener(\"DOMContentLoaded\", function() {\r\n    iniciarApp();\r\n})\r\n\r\nfunction iniciarApp() {\r\n    menu()\r\n}\r\n\r\nfunction menu() {\r\n    const menu = document.querySelector('#menu')\r\n    const sidebar = document.querySelector('#sidebar')\r\n    const cerrar = document.querySelector('#cerrar')\r\n    menu.addEventListener('click', function() {\r\n        sidebar.classList.add('mostrar')\r\n        setTimeout(() => {\r\n            sidebar.classList.add('opacity-in')\r\n        }, 0);\r\n    })\r\n    cerrar.addEventListener('click', function() {\r\n        sidebar.classList.add('opacity-out')\r\n        sidebar.classList.remove('opacity-in')\r\n        setTimeout(() => {\r\n            sidebar.classList.remove('mostrar')\r\n            sidebar.classList.remove('opacity-out')\r\n        }, 200);\r\n        \r\n\r\n    })\r\n}"]}